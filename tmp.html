<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agile Quiz</title>
    <style>
        /* Add some basic styling */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .hidden {
            display: none;
        }
        #quizResult {
            margin-top: 20px;
            font-size: 1.5em;
        }
    </style>
</head>
<body>

<h1>Agile Quiz</h1>
<p>Please select the number of questions you want to try:</p>
<input type="number" id="questionCount" min="1" max="10" value="5">
<button id="startQuiz">Start Quiz</button>

<div id="quiz" class="hidden">
    <p id="question"></p>
    <input type="text" id="answer">
    <button id="submitAnswer">Submit Answer</button>
</div>

<div id="quizResult" class="hidden"></div>
<button id="clearData">Clear Historical Data</button>

<script>
let currentQuestionIndex = 0;
let correctAnswers = 0;
let totalQuestions = 0;

const questions = [
    { question: "What does Agile refer to?", answer: "a methodology" },
    { question: "What is Scrum?", answer: "a framework" },
    { question: "What is a user story?", answer: "a requirement" },
    { question: "What is a sprint?", answer: "a time-boxed period" },
    { question: "What is a backlog?", answer: "a list of tasks" },
    // Add more questions as needed
];

// Start the quiz
document.getElementById("startQuiz").onclick = function() {
    totalQuestions = parseInt(document.getElementById("questionCount").value);
    currentQuestionIndex = 0;
    correctAnswers = 0;
    document.getElementById("quizResult").classList.add("hidden");
    document.getElementById("quiz").classList.remove("hidden");
    showQuestion();
};

function showQuestion() {
    if (currentQuestionIndex < totalQuestions && currentQuestionIndex < questions.length) {
        document.getElementById("question").innerText = questions[currentQuestionIndex].question;
    } else {
        endQuiz();
    }
}

// Submit answer
document.getElementById("submitAnswer").onclick = function() {
    const userAnswer = document.getElementById("answer").value.trim().toLowerCase();
    const correctAnswer = questions[currentQuestionIndex].answer.toLowerCase();

    if (userAnswer === correctAnswer) {
        correctAnswers++;
    }

    currentQuestionIndex++;
    document.getElementById("answer").value = ""; // Clear input
    showQuestion();
};

// End the quiz
function endQuiz() {
    document.getElementById("quiz").classList.add("hidden");
    const successRate = (correctAnswers / totalQuestions) * 100;
    
    document.getElementById("quizResult").innerText = `You got ${correctAnswers} out of ${totalQuestions} correct!`;
    document.getElementById("quizResult").classList.remove("hidden");
    
    console.log(`Success Rate: ${successRate.toFixed(2)}%`); // Log success rate

    // Retrieve previous attempts from local storage
    const previousAttempts = JSON.parse(localStorage.getItem('quizAttempts')) || [];
    previousAttempts.push(successRate);
    localStorage.setItem('quizAttempts', JSON.stringify(previousAttempts));

    const successfulQuizzes = previousAttempts.filter(rate => rate >= 50).length; // Assuming 50% is the threshold
    console.log(`Successful Quizzes: ${successfulQuizzes}`); // Log number of successful quizzes

    // Your goal logic
    const minimumTimes = 3; // Set your goal here
    if (successfulQuizzes >= minimumTimes) {
        alert("Congratulations! You've met your goal!");
        console.log("Goal Achieved!");
    } else {
        const remainingAttempts = minimumTimes - successfulQuizzes;
        alert(`You need ${remainingAttempts} more successful quizzes to reach your goal.`);
        console.log(`Need ${remainingAttempts} more to achieve goal.`);
    }

    // Log the entire attempt history
    console.log("Attempt History:", previousAttempts);
}

// Clear historical data
document.getElementById("clearData").onclick = function() {
    localStorage.removeItem('quizAttempts');
    alert("Historical data cleared!");
    console.log("Historical data cleared!");
};
</script>

</body>
</html>
