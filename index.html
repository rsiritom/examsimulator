<div id="histogram"></div> <!-- Container for the histogram -->

<script>
    let currentQuestionIndex = 0;
    let correctAnswersCount = 0;
    let questions = [];
    let quizAttempts = []; // Store the number of correct answers for each quiz attempt

    // Function to start the quiz and fetch questions
    function startQuiz() {
        const questionCount = document.getElementById('question-count').value;
        fetch(`https://quientecrea.pythonanywhere.com/api/v1/questions/${questionCount}`)
            .then(response => response.json())
            .then(data => {
                questions = data;
                currentQuestionIndex = 0;
                correctAnswersCount = 0;
                document.getElementById('quiz-container').style.display = 'block';
                document.getElementById('result-container').style.display = 'none';
                showQuestion();
            });
    }

    // Function to check if the user's answer is correct
    function checkAnswer(selectedOption) {
        const correctAnswer = questions[currentQuestionIndex].correct_answer;
        if (selectedOption === correctAnswer) {
            correctAnswersCount++;
        }
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    // Function to show the result at the end of the quiz
    function showResult() {
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('result-container').style.display = 'block';
        document.getElementById('result').innerText = `You got ${correctAnswersCount} out of ${questions.length} correct!`;
        quizAttempts.push(correctAnswersCount); // Store the result for this attempt
        showHistogram(); // Update the histogram
    }

    // Function to show the histogram of quiz results
    function showHistogram() {
        const histogramContainer = document.getElementById('histogram');
        histogramContainer.innerHTML = ''; // Clear previous bars
        quizAttempts.forEach(attempt => {
            const bar = document.createElement('div');
            const barWidth = (attempt / 5) * 100; // Calculate width as a percentage of 5
            bar.className = 'bar';
            bar.style.width = `${barWidth}%`; // Set the width of the bar
            bar.innerText = `${attempt}`; // Add score as label inside the bar
            bar.classList.add('label'); // Add label class
            histogramContainer.appendChild(bar); // Add bar to the histogram
        });
        console.log(quizAttempts); // Debugging info to check attempts
    }
</script>

<style>
    /* Styles for the histogram */
    #histogram {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        align-items: flex-start; /* Align items to the left */
        width: 100%; /* Make histogram container full width */
    }
    .bar {
        background-color: #007bff;
        margin: 5px 0; /* Vertical spacing between bars */
        border-radius: 5px;
        width: 80%; /* Default bar width */
        transition: width 0.3s;
        color: white; /* Text color for labels */
        text-align: center; /* Center the text */
        font-weight: bold; /* Bold text for better visibility */
        padding: 5px 0; /* Padding for labels */
    }
</style>
